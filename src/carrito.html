<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito de Compras - TopSkin</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="css/carrito.css">
</head>
<body>

<div id="app" class="carrito-wrapper">
  <header class="carrito-header">
    <label class="select-all">
      <input type="checkbox" v-model="todosSeleccionados">
      <span>Todos los artículos</span>
    </label>
    <h1>TOPSKIN</h1>
  </header>

  <div class="carrito-body">
    <div class="productos-lista" v-if="carrito.length > 0">
      <div v-for="item in carrito" :key="item.idProducto" class="producto-item">
        <label class="checkbox-producto">
          <input type="checkbox" 
                 :checked="seleccionados.includes(item.idProducto)"
                 @change="toggleSeleccion(item.idProducto)">
          <span class="checkmark"></span>
        </label>

        <img :src="'img/productos/' + (item.foto || 'placeholder.jpg')" :alt="item.nombre">

        <div class="info-producto">
          <h3>{{ item.nombre }}</h3>
          <p>{{ item.marca || 'Genérico' }}</p>
          <div class="precio-cantidad">
            <span class="precio">Bs. {{ (item.precioUnitario * item.cantidad).toFixed(2) }}</span>
            <div class="cantidad-controls">
              <button @click="cambiarCantidad(item, -1)" :disabled="item.cantidad <= 1">-</button>
              <span>{{ item.cantidad }}</span>
              <button @click="cambiarCantidad(item, 1)">+</button>
            </div>
          </div>
        </div>

        <button class="btn-eliminar" @click="eliminar(item.idProducto)">
          <i class="fas fa-trash-alt"></i>
        </button>
      </div>
    </div>

    <div v-else class="carrito-vacio">
      <h2>Tu carrito está vacío</h2>
      <a href="catalogo.html">Ir al catálogo</a>
    </div>

    <aside class="resumen-compra">
      <h3>Resumen de la compra</h3>
      <div class="mini-productos">
        <img v-for="prod in productosSeleccionados" 
             :key="prod.idProducto"
             :src="'img/productos/' + (prod.foto || 'placeholder.jpg')">
      </div>

      <div class="linea-total">
        <span>Total:</span>
        <strong>Bs. {{ totalSeleccionado.toFixed(2) }}</strong>
      </div>
      <div class="linea-descuento">
        <span>Descuento:</span>
        <strong>0.00 Bs</strong>
      </div>
      <div class="linea-subtotal">
        <span>Subtotal:</span>
        <strong>Bs. {{ totalSeleccionado.toFixed(2) }}</strong>
      </div>

      <button class="btn-comprar" @click="irAlPago">
        Comprar
      </button>
    </aside>
  </div>
</div>

<script src="js/carrito.js"></script>
</body>
</html>